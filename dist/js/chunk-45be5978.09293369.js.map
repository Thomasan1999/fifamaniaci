{"version":3,"sources":["webpack:///./src/components/UserDropdown.vue?23f3","webpack:///./src/components/UserDropdown.vue?b372","webpack:///./src/components/UserDropdown.vue","webpack:///./src/components/UserDropdown.vue?ce14","webpack:///./src/components/UserDropdown.vue?8d04"],"names":["render","_obj","_vm","this","_h","$createElement","_c","_self","staticClass","style","reversed","flexDirection","_l","ref","c","userId","user","key","class","active","userActiveIndex","domProps","_s","username","on","blurOn","$event","clickOn","staticRenderFns","Main","$emit","keyMode","shift","$Range","usersSorted","length","incorporate","$Tomwork","emptyIs","users","bottomRowHeight","$el","closest","querySelector","offsetHeight","height","parseFloat","window","getComputedStyle","getPropertyValue","Boolean","$parent","$store","state","windowHeight","getBoundingClientRect","bottom","Object","entries","sort","userA","userB","toLowerCase","localeCompare","reversedCalc","required","type","String","name","component"],"mappings":"kHAAA,yBAAwnB,EAAG,G,kECA3nB,IAAIA,EAAS,WACb,IAAIC,EACAC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,gBAAgBC,OAASR,EAAO,GAAIA,EAAKC,EAAIQ,SAAW,SAAW,OAAS,OAAQT,EAAKU,cAAiB,UAAYT,EAAIQ,SAAW,WAAa,IAAMT,IAASC,EAAIU,GAAIV,EAAe,aAAE,SAASW,EAAIC,GACnS,IAAIC,EAASF,EAAI,GACbG,EAAOH,EAAI,GACf,OAAOP,EAAG,SAAS,CAACW,IAAIH,EAAEI,MAAM,CAACC,OAAQL,IAAMZ,EAAIkB,iBAAiBC,SAAS,CAAC,UAAYnB,EAAIoB,GAAGN,EAAKO,WAAWC,GAAG,CAAC,KAAOtB,EAAIuB,OAAO,MAAQ,SAASC,GAAQ,OAAOxB,EAAIyB,QAAQ,CAACX,KAAMA,EAAMD,OAAQA,WAAe,IACnNa,EAAkB,G,4DCStB,IAAqB,EAArB,cAA0C,eAAOC,EAAA,OAAjD,c,oBAyDW,KAAAnB,UAAoB,EACpB,KAAAU,iBAA2B,EArD3B,SAEHjB,KAAK2B,MAAL,QAGG,SAAQ,KAACd,EAAD,OAAOD,IAElBZ,KAAK2B,MAAL,QAAoB,CAAC,CAACf,GAASC,IAG5B,WAAU,IAACC,IAEd,GAAI,UAAAd,KAAK4B,QAKT,OAAQd,GAEJ,gBACA,cACA,CACI,MAAMe,GAAyB,cAARf,EAAsB,GAAK,IAAMd,KAAKO,UAAY,EAAI,GAE7EP,KAAKiB,gBAAkB,IAAIjB,KAAK8B,QAAQ,EAAG9B,KAAK+B,YAAYC,OAAS,GAAGC,YAAYjC,KAAKiB,gBAAkBY,GAC3G,MAEJ,YAOI,IAL8B,IAA1B7B,KAAKiB,kBAELjB,KAAKiB,gBAAkB,GAGvBjB,KAAKkC,SAASC,QAAQnC,KAAKoC,OAE3B,OAGJpC,KAAK2B,MAAL,QAAoB,CAAC,CAAC3B,KAAK+B,YAAY/B,KAAKiB,iBAAiB,IAAKjB,KAAK+B,YAAY/B,KAAKiB,iBAAiB,MAK9G,eAAY,MAEf,MAAMoB,EAA0BrC,KAAKsC,IAAL,UAAYtC,KAAKsC,IAAIC,QAAT,kBAAZ,aAAY,EAA6BC,cAA7B,eAA0EC,aAAe,EAC/HC,EAAiB1C,KAAKsC,IAAuF,EAAhFK,WAAWC,OAAOC,iBAAiB7C,KAAKsC,KAAKQ,iBAAlC,gBAA0ET,EAAkB,EAE1IrC,KAAKO,SAAWwC,QAAQ/C,KAAKgD,QAAQV,KAAOtC,KAAKiD,OAAOC,MAAMC,aAAenD,KAAKgD,QAAQV,IAAIc,wBAAwBC,OAASX,GAMnI,kBAEI,OAAOY,OAAOC,QAAQvD,KAAKoC,OAAOoB,KAAK,EAAE,CAAEC,IAAS,CAAEC,KAE3CD,EAAMrC,SAASuC,cAAcC,cAAcF,EAAMtC,SAASuC,gBAKlE,sBAEH3D,KAAK6D,eAGT,UAEI7D,KAAK6D,iBA1E6B,gBAArC,eAAK,CAACC,UAAU,EAAMC,KAAMC,U,8BACS,gBAArC,eAAK,CAACF,UAAU,EAAMC,KAAMT,U,4BAkE7B,gBADC,eAAM,gB,kCAIN,MAxEgB,EAAY,gBAHhC,eAAU,CACPW,KAAM,kBAEW,WCfkX,I,wBCQnYC,EAAY,eACd,EACArE,EACA4B,GACA,EACA,KACA,WACA,MAIa,aAAAyC,E","file":"js/chunk-45be5978.09293369.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserDropdown.vue?vue&type=style&index=0&id=5e1c3456&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserDropdown.vue?vue&type=style&index=0&id=5e1c3456&lang=stylus&scoped=true&\"","var render = function () {\nvar _obj;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-dropdown\",style:(( _obj = {}, _obj[_vm.reversed ? \"bottom\" : \"top\"] = \"100%\", _obj.flexDirection = (\"column\" + (_vm.reversed ? \"-reverse\" : \"\")), _obj ))},_vm._l((_vm.usersSorted),function(ref,c){\nvar userId = ref[0];\nvar user = ref[1];\nreturn _c('button',{key:c,class:{active: c === _vm.userActiveIndex},domProps:{\"innerHTML\":_vm._s(user.username)},on:{\"blur\":_vm.blurOn,\"click\":function($event){return _vm.clickOn({user: user, userId: userId})}}})}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\nimport {mixins}                 from 'vue-class-component';\nimport {Component, Prop, Watch} from 'vue-property-decorator';\nimport MainMixin                from '@/mixins/Main';\n\n@Component({\n    name: `UserDropdown`\n})\nexport default class UserDropdown extends mixins(MainMixin)\n{\n    @Prop({required: true, type: String}) public readonly keyMode!: string;\n    @Prop({required: true, type: Object}) public readonly users!: { [s: string]: UserValue };\n\n    public blurOn(): void\n    {\n        this.$emit(`blur`);\n    }\n\n    public clickOn({user, userId}: { user: Omit<UserValue, 'id'>, userId: string }): void\n    {\n        this.$emit(`click`, {[userId]: user});\n    }\n\n    public keydownOn({key}: KeyboardEvent): void\n    {\n        if (this.keyMode !== `input`)\n        {\n            return;\n        }\n\n        switch (key)\n        {\n            case `ArrowDown`:\n            case `ArrowUp`:\n            {\n                const shift: number = (key === `ArrowDown` ? 1 : -1) * (this.reversed ? -1 : 1);\n\n                this.userActiveIndex = new this.$Range(-1, this.usersSorted.length - 1).incorporate(this.userActiveIndex + shift);\n                break;\n            }\n            case `Enter`:\n            {\n                if (this.userActiveIndex === -1)\n                {\n                    this.userActiveIndex = 0;\n                }\n\n                if (this.$Tomwork.emptyIs(this.users))\n                {\n                    return;\n                }\n\n                this.$emit(`click`, {[this.usersSorted[this.userActiveIndex][0]]: this.usersSorted[this.userActiveIndex][1]});\n            }\n        }\n    }\n\n    public reversedCalc(): void\n    {\n        const bottomRowHeight: number = this.$el ? (this.$el.closest(`section`)?.querySelector(`.bottom-row`) as HTMLElement).offsetHeight : 0;\n        const height: number = this.$el ? (parseFloat(window.getComputedStyle(this.$el).getPropertyValue(`line-height`)) * 5) + bottomRowHeight : 0;\n\n        this.reversed = Boolean(this.$parent.$el && this.$store.state.windowHeight - this.$parent.$el.getBoundingClientRect().bottom < height);\n    }\n\n    public reversed: boolean = false;\n    public userActiveIndex: number = -1;\n\n    public get usersSorted(): [string, Omit<UserValue, 'id'>][]\n    {\n        return Object.entries(this.users).sort(([, userA], [, userB]) =>\n        {\n            return userA.username.toLowerCase().localeCompare(userB.username.toLowerCase());\n        });\n    }\n\n    @Watch('usersSorted')\n    public usersSortedChangeOn(): void\n    {\n        this.reversedCalc();\n    }\n\n    mounted()\n    {\n        this.reversedCalc();\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserDropdown.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserDropdown.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./UserDropdown.vue?vue&type=template&id=5e1c3456&scoped=true&\"\nimport script from \"./UserDropdown.vue?vue&type=script&lang=ts&\"\nexport * from \"./UserDropdown.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./UserDropdown.vue?vue&type=style&index=0&id=5e1c3456&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5e1c3456\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}